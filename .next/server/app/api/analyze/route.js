(()=>{var e={};e.id=786,e.ids=[786],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6359:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>C,routeModule:()=>x,serverHooks:()=>E,workAsyncStorage:()=>w,workUnitAsyncStorage:()=>b});var i={};r.r(i),r.d(i,{POST:()=>k});var s=r(6559),n=r(8088),o=r(7719),a=r(2190);let c=process.env.ALCHEMY_API_KEY,u=`https://api.g.alchemy.com/prices/v1/${c}/tokens/historical`,p={SOL:"solana",BONK:"bonk",BTC:"bitcoin",DOGE:"dogecoin",HYPE:"hyperliquid",PENGU:"pudgy-penguins",PUMP:"pump-fun"},l={ETH:null,WBTC:"0x2260FAC5E5542a773AaA73edC008A79646d1F9912",WDOGE:"0xbA2aE424d960c26247Dd6c32edC70B295c744C43",USDT:"0xdAC17F958D2ee523a2206206994597C13D831ec7",USDC:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",SHIBA:"0x95aD61b0a150d79219dCF64E1E6Cc01f0B64C4cE",PEPE:"0x6982508145454Ce325dDbE47a25d4ec3d2311933",TON:"0x2e9d63788249371f1dfc918a52f8d799f4a38c94"};function d(e,t){return e.length<t?null:e.slice(-t).reduce((e,t)=>e+t,0)/t}async function h(e,t,r){if(!t&&"ETH"!==e)return[];let i=function(e){let t=new Date;return t.setDate(t.getDate()-e),t.toISOString().split("T")[0]+"T00:00:00Z"}(r),s=new Date().toISOString().split("T")[0]+"T23:59:59Z",n=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?{network:"ethereum",address:t,startTime:i,endTime:s}:{symbol:e,startTime:i,endTime:s})}),o=await n.json();return o?.data?.prices?o.data.prices.map(e=>parseFloat(e.value)).filter(e=>!isNaN(e)):[]}async function f(e,t){let r=`https://api.coingecko.com/api/v3/coins/ethereum/contract/${e}/market_chart?vs_currency=usd&days=${t}`;try{let t=await fetch(r),i=await t.json();if(i?.prices)return i.prices.map(e=>e[1]).filter(e=>!isNaN(e));console.log(`[CoinGecko] No price history found for contract: ${e}`)}catch(t){console.error(`[CoinGecko] Error fetching price history for contract: ${e}`,t)}return[]}async function y(e,t){let r=`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&days=${t}`;try{let t=await fetch(r),i=await t.json();if(i?.prices)return i.prices.map(e=>e[1]).filter(e=>!isNaN(e));console.log(`[CoinGecko] No price history found for id: ${e}`)}catch(t){console.error(`[CoinGecko] Error fetching price history for id: ${e}`,t)}return[]}let m=process.env.NODIT_API_URL||"http://localhost:3000/api/nodit";async function g(e){try{let t=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"get_price",params:[e],id:1})}),r=await t.json();if(r?.result?.price)return r.result.price}catch(t){console.error(`[Nodit] Error fetching current price for ${e}`,t)}return null}async function v(e,t){try{let r="";if("ETH"===e)r="https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd";else if(p[e])r=`https://api.coingecko.com/api/v3/simple/price?ids=${p[e]}&vs_currencies=usd`;else{if(!t)return null;r=`https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=${t}&vs_currencies=usd`}let i=await fetch(r),s=await i.json();if("ETH"===e&&s?.ethereum?.usd)return s.ethereum.usd;if(p[e]&&s[p[e]]?.usd)return s[p[e]].usd;if(t){let e=Object.keys(s)[0];if(e&&s[e]?.usd)return s[e].usd}}catch(t){console.error(`[CoinGecko] Error fetching current price for ${e}`,t)}return null}async function k(e){try{let{token:t,priceToken:r,marketProbability:i,marketOdds:s,bankroll:n}=await e.json();if("number"!=typeof s||"string"!=typeof t)return a.NextResponse.json({error:"Invalid input"},{status:400});let o=null,c=[],u=.6,m=null,k=r||t,x=l[k];if(o=await g(k),null===o&&(o=await v(k,null===x?void 0:x)),p[k]){let e=await y(p[k],7);c=e,u=(m=d(e,7))&&o?Math.min(1,Math.max(0,m/o)):.6}else if("ETH"===k)c=[3400,3450,3500],u=.6,m=3500;else{let e=l[k];if(!e)return a.NextResponse.json({error:"Unsupported token"},{status:400});let r=await h(t,e,7);r.length||(r=await f(e,7)),c=r,u=(m=d(r,7))&&o?Math.min(1,Math.max(0,m/o)):.6}let w=function(e){let t=e.botProbability-e.marketProbability,r="";r=t>0?"This market is undervalued. You’re getting alpha here. Go for it \uD83E\uDD11.":"Careful! The market is overpricing this. Risk is higher than reward ⚠️.";let i="";if(e.priceHistory&&e.priceHistory.length>1){let t=e.priceHistory[0],r=(e.priceHistory[e.priceHistory.length-1]-t)/t*100;i=`Price changed ${r.toFixed(2)}% over the period.`,Math.abs(r)>20?i+=" Could be risky \uD83D\uDEA8.":r>0?i+=" Uptrend \uD83D\uDCC8.":r<0?i+=" Downtrend \uD83D\uDCC9.":i+=" Flat trend."}else i="No price history available for trend analysis.";return{oddsAdvice:r,trendAdvice:i,sentimentAdvice:Math.random()>.5?"Sentiment is highly bullish on this outcome – 80% of recent posts agree.":"Sentiment is mixed. Proceed cautiously.",priceHistory:e.priceHistory}}({marketProbability:i??.55,botProbability:u,marketOdds:s??1.8,bankroll:n,priceHistory:c});return a.NextResponse.json({...w,price:o,token:t,ma7:m})}catch(e){return a.NextResponse.json({error:e.message},{status:500})}}let x=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/analyze/route",pathname:"/api/analyze",filename:"route",bundlePath:"app/api/analyze/route"},resolvedPagePath:"/Users/devisha/Projects/chat-and-predict/src/app/api/analyze/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:w,workUnitAsyncStorage:b,serverHooks:E}=x;function C(){return(0,o.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:b})}},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[447,580],()=>r(6359));module.exports=i})();